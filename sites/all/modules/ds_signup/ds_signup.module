<?

function ds_signup_block($op = 'list', $delta = 0, $edit = array()) {
  $blocks = array();

  if ($op == 'list') {
    $blocks[0]['info'] = 'Signup top right';
    $blocks[0]['cache'] = BLOCK_NO_CACHE;
  } else if ($op == 'view') {
    switch ($delta) {
      case 0:
        $blocks['subject'] = '';
        $blocks['content'] = _ds_signup_block();
        break;
    }
  }

  return $blocks;
}

function _ds_signup_block() {
  global $user;
  $block_str = '<div id="sign-up">
    <p class="text">';
  $block_str .= '<div class="blue">'.
    '<img class="need-help" src="/sites/all/themes/dosomething/images/need-help.png"/>'.
    '<p><span class="lightblue">Text </span> HELPME to 30644</p>'.
    '<p><span class="lightblue"><a href="mailto:help@dosomething.org">Email</a> </span> help@dosomething.org</p>'.
    '</div>';
  if ($user->uid) {
    $block_str .= l('My Account', 'user/' . $user->uid).' | <a href="/logout">Log Out</a>';
  } else {
    $redirect = array( 'html' => true, 'query' => drupal_get_destination());
    $block_str .= l('Log In','user/login',$redirect).
      ' | '.l('Join Us','user/register',$redirect);
  }

  $block_str .= '</div>';
  return $block_str;
}


?>
